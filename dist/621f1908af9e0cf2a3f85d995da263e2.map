{"version":3,"sources":["js/scale.ts","js/index.ts"],"names":[],"mappings":"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","file":"621f1908af9e0cf2a3f85d995da263e2.map","sourcesContent":["import { Scale } from './types';\n\nfunction roundDecimals(num: number): number {\n  return Math.round(num * 100) / 100;\n}\n\nfunction exponentialScaleAbsolute(base: number, ratio: number): Scale {\n  const md = base;\n  const sm = roundDecimals(md / ratio);\n  const xs = roundDecimals(sm / ratio);\n  const xxs = roundDecimals(xs / ratio);\n  const lg = roundDecimals(md * ratio);\n  const xl = roundDecimals(lg * ratio);\n  const xxl = roundDecimals(xl * ratio);\n\n  return {\n    xxs,\n    xs,\n    sm,\n    md,\n    lg,\n    xl,\n    xxl,\n  };\n}\n\nfunction exponentialScaleRelative(base: number, ratio: number): Scale {\n  const md = base / base;\n  const sm = roundDecimals(md / ratio);\n  const xs = roundDecimals(sm / ratio);\n  const xxs = roundDecimals(xs / ratio);\n  const lg = roundDecimals(md * ratio);\n  const xl = roundDecimals(lg * ratio);\n  const xxl = roundDecimals(xl * ratio);\n\n  return {\n    xxs,\n    xs,\n    sm,\n    md,\n    lg,\n    xl,\n    xxl,\n  };\n}\n\nfunction linearScaleAbsolute(base: number, ratio: number): Scale {\n  const distance = base * ratio;\n  const md = base;\n  const sm = md - distance;\n  const xs = sm - distance;\n  const xxs = xs - distance;\n  const lg = md + distance;\n  const xl = lg + distance;\n  const xxl = xl + distance;\n\n  return {\n    xxs,\n    xs,\n    sm,\n    md,\n    lg,\n    xl,\n    xxl,\n  };\n}\n\nfunction linearScaleRelative(base: number, distance: number): Scale {\n  const md = base / base;\n  const sm = md - distance;\n  const xs = sm - distance;\n  const xxs = xs - distance;\n  const lg = md + distance;\n  const xl = lg + distance;\n  const xxl = xl + distance;\n\n  return {\n    xxs,\n    xs,\n    sm,\n    md,\n    lg,\n    xl,\n    xxl,\n  };\n}\n\nexport {\n  exponentialScaleAbsolute,\n  exponentialScaleRelative,\n  linearScaleAbsolute,\n  linearScaleRelative,\n};\n","import { Scale } from './types';\nimport { exponentialScaleAbsolute, exponentialScaleRelative } from './scale';\n\n(() => {\n  const domRoot = document.documentElement;\n\n  const relativeDisplayNodes = document.querySelectorAll('[data-behavior~=\"get-relative-size\"]');\n  const absoluteDisplayNodes = document.querySelectorAll('[data-behavior~=\"get-absolute-size\"]');\n  const relativeDisplayElements = Array.from(relativeDisplayNodes);\n  const absoluteDisplayElements = Array.from(absoluteDisplayNodes);\n\n  function getDesktopBaseSize(): number {\n    return parseInt(getComputedStyle(domRoot).getPropertyValue(`--desktop-font-size`)) || 18;\n  }\n\n  function updateDesktopScale(event) {\n    const size = event.target.value;\n    domRoot.style.setProperty('--desktop-font-size', `${size}px`);\n  }\n\n  function updateCustomProperties(scale: Scale) {\n    Object.keys(scale).map(key => {\n      domRoot.style.setProperty(`--space-${key}`, `${scale[key]}rem`);\n    });\n  }\n\n  function updateDisplaySizes(scale: Scale, elements: any[], units: string) {\n    elements.map(element => {\n      const size = element.dataset.scale;\n      element.innerHTML = scale[size] + units;\n    });\n  }\n\n  function toggleScale(event) {\n    const ratio = event.target.value;\n    const baseSize = getDesktopBaseSize();\n    const relativeScale = exponentialScaleRelative(baseSize, ratio);\n    const absoluteScale = exponentialScaleAbsolute(baseSize, ratio);\n\n    updateCustomProperties(relativeScale);\n    updateDisplaySizes(relativeScale, relativeDisplayElements, ' rem');\n    updateDisplaySizes(absoluteScale, absoluteDisplayElements, ' px');\n  }\n\n  Array.from(document.querySelectorAll('[data-behavior~=\"get-new-scale\"]')).map(input => {\n    input.addEventListener('change', toggleScale);\n  });\n  document\n    .querySelector('[data-behavior~=\"change-base-desktop\"]')\n    .addEventListener('change', updateDesktopScale);\n})();\n\n// Create initApp\n// Binds all the listeners\n// Builds a model from the current variables\n// Updates the displays\n\n// On any event\n// the bound function calculates a value\n// sends it to the update function\n\n// Update\n// holds the current model\n// gets the new model\n// Updates displays, etc\n// Makes destructive changes\n\n// switch/case branch that handles all the updates?\n"]}